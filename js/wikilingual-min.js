function onWikiDataReceived(n,a){var e={};return void 0!==n.entities&&a.forEach(function(a){for(var l in n.entities){var i=a+"wiki";void 0!==n.entities[l].sitelinks&&i in n.entities[l].sitelinks?e[a]={title:n.entities[l].sitelinks[i].title}:e[a]={}}}),e}function getWikiLinks(n,a,e){var l={};for(var i in n)for(var t in a){var o=n[i];void 0!==a[o].title?l[o]={wiki_link:getWikiArticleLink(o,a[o].title)}:l[o]={wiki_link:getWikiArticleLink(o,e)}}return l}function getWikiData(n,a,e){var l=n.join("|"),i="https://www.wikidata.org/w/api.php?action=wbgetentities&format=json&titles="+a+"&sites="+n[0]+"wiki&languages="+l+"&callback=?";$.getJSON(i,e)}function getWikiArticleLink(n,a){return"https://"+n+".wikipedia.org/w/index.php?title="+a}function getWikiSearchLink(n,a){return"https://"+n+".wikipedia.org/wiki/Special:Search?search=sodia&profile=default&fulltext=Search&search="+a}function submitQuery(){query=$("#input_search").val(),console.log("Query submitted "+query),getWikiData(languageIds,query,onQueryCompleted),$.ajax({url:"./query",type:"POST",dataType:"json",contentType:"application/json, charset=utf-8",data:JSON.stringify({query:query,regions:languageIds}),success:function(n,a,e){}})}function onQueryCompleted(n){var a=onWikiDataReceived(n,languageIds),e=getWikiLinks(languageIds,a,query);console.log(e);for(var l in languageIds){var i=languageIds[l],t=$("#content_container").find("#"+i);t.empty(),t.append("<iframe class='content_wiki' src="+e[i].wiki_link+"&printable=yes></iframe>")}}function addLanguage(n,a){languageIds.push(n),$("#content_container").append("<div id='"+n+"' class='content_panel panel-body'><h2>"+languages[n].eng+"<br>"+languages[n].local+"</h2></div>"),updateContentFrames()}function removeLanguage(){languageIds.length>0&&removeFrame(languageIds.pop())}function removeFrame(n){$("#content_container").find("#"+n).remove(),$("#lang_menu tr #"+n).toggleClass("selected"),updateContentFrames()}function updateContentFrames(){var n=1/languageIds.length*100,a=$("#content_container");languageIds.forEach(function(e){a.find("#"+e).css({display:"inline-block",width:n+"%"})})}function createTable(n){var a=$("#lang_menu"),e=0,l="<tr>";void 0!==languages[n]&&(e+=1,l+="<td id='"+n+"'><span>"+languages[n].eng+"</span></td>");var i=Object.keys(languages);i.sort(function(n,a){return languages[n].eng.charAt(0)>languages[a].eng.charAt(0)});for(var t in i){var o=languages[i[t]];n!==i[t]&&(0===e&&(l+="<tr>"),l+="<td id='"+i[t]+"'><span>"+o.eng+"</span></td>",e>4&&(l+="</tr>"),e+=1,e>4&&(e=0))}a.append(l)}$(document).ready(function(){var n=navigator.language;n.indexOf("-")>0&&(n=n.substring(0,n.indexOf("-"))),createTable(n),addLanguage(n,languages[n].eng),$("#lang_menu tr #"+n).toggleClass("selected"),$("#lang_menu").find("td").click(function(){var n=$(this).attr("id");languageIds.includes(n)||($(this).toggleClass("selected"),addLanguage(n,$(this).find("span").text())),$("#lang_menu").toggle()}),$("html").click(function(){$("#lang_menu").hide()}),$("#lang_menu").toggle(),$("#btn_add_lang").click(function(n){n.stopPropagation(),$("#lang_menu").toggle();var a=$(".container-fluid").width()-$("#lang_menu > tbody").outerWidth(),e=$("#btn_add_lang").offset().top+$("#input_search_group").height();$("#lang_menu_container").css({top:e,left:a})}),$("#btn_remove_lang").click(removeLanguage),$("#btn_search").click(submitQuery),$("#input_search").keyup(function(n){13==n.keyCode&&$("#btn_search").click()})});var languageIds=[],query,languages={eo:{eng:"Esperanto",local:"Esperanto"},sr:{eng:"Serbian",local:"српски / srpski"},id:{eng:"Indonesian",local:"Bahasa Indonesia"},be:{eng:"Belarusian",local:"беларуская"},bg:{eng:"Bulgarian",local:"български"},fi:{eng:"Finnish",local:"suomi"},ceb:{eng:"Cebuano",local:"Cebuano"},nn:{eng:"Norwegian (Nynorsk)",local:"norsk nynorsk"},pl:{eng:"Polish",local:"polski"},ro:{eng:"Romanian",local:"română"},ja:{eng:"Japanese",local:"日本語"},la:{eng:"Latin",local:"Latina"},ar:{eng:"Arabic",local:"العربية"},es:{eng:"Spanish",local:"español"},sh:{eng:"Serbo-Croatian",local:"srpskohrvatski / српскохрватски"},et:{eng:"Estonian",local:"eesti"},de:{eng:"German",local:"Deutsch"},hr:{eng:"Croatian",local:"hrvatski"},hy:{eng:"Armenian",local:"Հայերեն"},sv:{eng:"Swedish",local:"svenska"},ms:{eng:"Malay",local:"Bahasa Melayu"},fr:{eng:"French",local:"français"},ca:{eng:"Catalan",local:"català"},zh:{eng:"Chinese",local:"中文"},uk:{eng:"Ukrainian",local:"українська"},el:{eng:"Greek",local:"Ελληνικά"},kk:{eng:"Kazakh",local:"қазақша"},ru:{eng:"Russian",local:"русский"},lt:{eng:"Lithuanian",local:"lietuvių"},gl:{eng:"Galician",local:"galego"},he:{eng:"Hebrew",local:"עברית"},eu:{eng:"Basque",local:"euskara"},tr:{eng:"Turkish",local:"Türkçe"},war:{eng:"Waray",local:"Winaray"},vo:{eng:"Volapük",local:"Volapük"},min:{eng:"Minangkabau",local:"Baso Minangkabau"},pt:{eng:"Portuguese",local:"português"},it:{eng:"Italian",local:"italiano"},no:{eng:"Norwegian (Bokmål)",local:"norsk bokmål"},ce:{eng:"Chechen",local:"нохчийн"},ko:{eng:"Korean",local:"한국어"},cs:{eng:"Czech",local:"čeština"},da:{eng:"Danish",local:"dansk"},simple:{eng:"Simple English",local:"Simple English"},vi:{eng:"Vietnamese",local:"Tiếng Việt"},uz:{eng:"Uzbek",local:"oʻzbekcha/ўзбекча"},fa:{eng:"Persian",local:"فارسی"},en:{eng:"English",local:"English"},nl:{eng:"Dutch",local:"Nederlands"},sl:{eng:"Slovenian",local:"slovenščina"},hu:{eng:"Hungarian",local:"magyar"},sk:{eng:"Slovak",local:"slovenčina"}};